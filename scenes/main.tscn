[gd_scene load_steps=33 format=3 uid="uid://dgb52shq4jcyg"]

[ext_resource type="Script" uid="uid://dgl6h7ryesfn8" path="res://scripts/cardManager.gd" id="1_0wfyh"]
[ext_resource type="Script" uid="uid://c3p2rmoacsirj" path="res://scripts/inputManager.gd" id="1_o6xl0"]
[ext_resource type="PackedScene" uid="uid://ekswpxuouhg1" path="res://scenes/cardSlot.tscn" id="3_sugp2"]
[ext_resource type="Script" uid="uid://g2x8dqt8pa4f" path="res://scripts/characterCardSlot.gd" id="4_jyhfs"]
[ext_resource type="Script" uid="uid://c3df834vnm13g" path="res://scripts/supportCardSlot.gd" id="4_tipki"]
[ext_resource type="Script" uid="uid://do1wqhx54kv7s" path="res://scripts/playerHand.gd" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://b0yx32b2u0wb1" path="res://scripts/characterDeck.gd" id="5_tefeu"]
[ext_resource type="PackedScene" uid="uid://cedct6rr8lclv" path="res://scenes/opponentCardSlot.tscn" id="6_85g3d"]
[ext_resource type="Script" uid="uid://dwr382qynby8f" path="res://scripts/battleManager.gd" id="10_choun"]
[ext_resource type="Texture2D" uid="uid://ymoqjcc5xbj2" path="res://assets/cards/CardBack.png" id="11_jbj1t"]
[ext_resource type="Script" uid="uid://conm4253y3tth" path="res://scripts/oppponentHand.gd" id="11_ya4ey"]
[ext_resource type="Script" uid="uid://che0dt2kvp0wy" path="res://scripts/supportDeck.gd" id="12_eb6dy"]
[ext_resource type="FontFile" uid="uid://cb6rqhjiq6408" path="res://assets/fonts/SF-Pro-Display-Black.otf" id="13_a8y0u"]
[ext_resource type="Texture2D" uid="uid://dqdg81ffrtrt0" path="res://assets/arenas/Arena.png" id="14_jbj1t"]
[ext_resource type="Texture2D" uid="uid://xni81jo33g8f" path="res://assets/arenaHeads/JuneNeutral.png" id="15_gqmmt"]
[ext_resource type="FontFile" uid="uid://di1dchl37cfhu" path="res://assets/fonts/SF-Pro-Display-Semibold.otf" id="15_jkv2x"]
[ext_resource type="Texture2D" uid="uid://dgqjpfbqq0f4p" path="res://assets/arenas/ActiveIndicator.png" id="16_muem4"]
[ext_resource type="Texture2D" uid="uid://bpqj5m7tiyln" path="res://assets/arenaHeads/JuneHurt.png" id="16_yc10j"]
[ext_resource type="Texture2D" uid="uid://crwpvlesiqi0o" path="res://assets/arenaHeads/JuneThinking.png" id="17_jscy8"]
[ext_resource type="Texture2D" uid="uid://d2oxvh8kvsjse" path="res://assets/arenaHeads/JuneHappy.png" id="18_pm3ni"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jyhfs"]
size = Vector2(140, 196)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_a8y0u"]
bg_color = Color(0.13725491, 0.13725491, 0.13725491, 1)
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_jbj1t"]
bg_color = Color(0.12156863, 0.12156863, 0.12156863, 1)
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_jkv2x"]
bg_color = Color(0.15686275, 0.15686275, 0.15686275, 1)
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_a8y0u"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_jkv2x"]

[sub_resource type="Animation" id="Animation_muem4"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("damage:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1624, 416)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("damage:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_jbj1t"]
resource_name = "showDamage"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("damage:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1624, 416), Vector2(1624, 296)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("damage:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_dp3eg"]
_data = {
&"RESET": SubResource("Animation_muem4"),
&"showDamage": SubResource("Animation_jbj1t")
}

[sub_resource type="Animation" id="Animation_0ld40"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("damage:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(1624, 634)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("damage:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_dp3eg"]
resource_name = "showDamage"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("damage:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1624, 634), Vector2(1624, 514)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("damage:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.5, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1), Color(1, 1, 1, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_gqmmt"]
_data = {
&"RESET": SubResource("Animation_0ld40"),
&"showDamage": SubResource("Animation_dp3eg")
}

[node name="main" type="Node2D"]

[node name="inputManager" type="Node2D" parent="."]
script = ExtResource("1_o6xl0")

[node name="Timer" type="Timer" parent="inputManager"]
one_shot = true

[node name="cardManager" type="Node2D" parent="."]
script = ExtResource("1_0wfyh")

[node name="battleManager" type="Node" parent="."]
script = ExtResource("10_choun")

[node name="battleTimer" type="Timer" parent="."]

[node name="cardSlots" type="Node2D" parent="."]

[node name="cardSlotSupport" parent="cardSlots" instance=ExtResource("3_sugp2")]
z_index = -2
position = Vector2(533, 450)
script = ExtResource("4_tipki")

[node name="cardSlotCharacter" parent="cardSlots" instance=ExtResource("3_sugp2")]
z_index = -2
position = Vector2(739, 450)
script = ExtResource("4_jyhfs")

[node name="opponentCardSlotCharacter" parent="cardSlots" instance=ExtResource("6_85g3d")]
z_index = -2
position = Vector2(1008, 450)

[node name="opponentCardSlotSupport" parent="cardSlots" instance=ExtResource("6_85g3d")]
z_index = -2
position = Vector2(1214.5, 450)

[node name="playerHand" type="Node2D" parent="."]
script = ExtResource("5_tbgi4")

[node name="opponentHand" type="Node2D" parent="."]
script = ExtResource("11_ya4ey")

[node name="characterDeck" type="Node2D" parent="."]
z_index = -2
position = Vector2(135, 796)
script = ExtResource("5_tefeu")

[node name="image" type="Sprite2D" parent="characterDeck"]
position = Vector2(0, 3.8146973e-06)
scale = Vector2(0.2, 0.2)
texture = ExtResource("11_jbj1t")

[node name="Area2D" type="Area2D" parent="characterDeck"]
collision_layer = 3
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="characterDeck/Area2D"]
shape = SubResource("RectangleShape2D_jyhfs")

[node name="RichTextLabel" type="RichTextLabel" parent="characterDeck"]
offset_left = -70.0
offset_top = 99.0
offset_right = 70.0
offset_bottom = 126.0
text = "0"
horizontal_alignment = 1
vertical_alignment = 1

[node name="supportDeck" type="Node2D" parent="."]
z_index = -2
position = Vector2(135, 548)
script = ExtResource("12_eb6dy")

[node name="image" type="Sprite2D" parent="supportDeck"]
position = Vector2(0, 3.8146973e-06)
scale = Vector2(0.2, 0.2)
texture = ExtResource("11_jbj1t")

[node name="Area2D" type="Area2D" parent="supportDeck"]
collision_layer = 3
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="supportDeck/Area2D"]
shape = SubResource("RectangleShape2D_jyhfs")

[node name="RichTextLabel" type="RichTextLabel" parent="supportDeck"]
offset_left = -70.0
offset_top = 99.0
offset_right = 70.0
offset_bottom = 126.0
text = "0"
horizontal_alignment = 1
vertical_alignment = 1

[node name="EndTurnButton" type="Button" parent="."]
offset_left = 828.0
offset_top = 651.0
offset_right = 1019.0
offset_bottom = 708.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 20
theme_override_styles/normal = SubResource("StyleBoxFlat_a8y0u")
theme_override_styles/pressed = SubResource("StyleBoxFlat_jbj1t")
theme_override_styles/hover = SubResource("StyleBoxFlat_jkv2x")
theme_override_styles/disabled = SubResource("StyleBoxEmpty_a8y0u")
theme_override_styles/focus = SubResource("StyleBoxEmpty_jkv2x")
text = "End Turn"

[node name="arena" type="Node2D" parent="."]
z_index = -99

[node name="image" type="Sprite2D" parent="arena"]
position = Vector2(959.98895, 540.00006)
scale = Vector2(0.24000001, 0.24000001)
texture = ExtResource("14_jbj1t")
metadata/_edit_lock_ = true

[node name="opponent" type="Node2D" parent="arena"]

[node name="head" type="Node2D" parent="arena/opponent"]
position = Vector2(1597, 350)
scale = Vector2(0.05, 0.05)

[node name="neutral" type="Sprite2D" parent="arena/opponent/head"]
texture = ExtResource("15_gqmmt")

[node name="hurt" type="Sprite2D" parent="arena/opponent/head"]
visible = false
texture = ExtResource("16_yc10j")

[node name="thinking" type="Sprite2D" parent="arena/opponent/head"]
visible = false
texture = ExtResource("17_jscy8")

[node name="happy" type="Sprite2D" parent="arena/opponent/head"]
visible = false
texture = ExtResource("18_pm3ni")

[node name="name" type="Label" parent="arena/opponent"]
offset_left = 1662.0
offset_top = 297.0
offset_right = 1860.0
offset_bottom = 324.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 22
text = "Opponent Name"
horizontal_alignment = 2
vertical_alignment = 1

[node name="description" type="Label" parent="arena/opponent"]
offset_left = 1695.0
offset_top = 320.0
offset_right = 1860.0
offset_bottom = 337.0
theme_override_fonts/font = ExtResource("15_jkv2x")
theme_override_font_sizes/font_size = 12
text = "Short Description"
horizontal_alignment = 2
vertical_alignment = 1

[node name="value" type="Label" parent="arena/opponent"]
offset_left = 1698.0
offset_top = 356.0
offset_right = 1808.0
offset_bottom = 407.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 42
text = "99"
horizontal_alignment = 2
vertical_alignment = 1

[node name="damage" type="Label" parent="arena/opponent"]
modulate = Color(1, 1, 1, 0)
offset_left = 1624.0
offset_top = 416.0
offset_right = 1734.0
offset_bottom = 467.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 42
text = "-99"
horizontal_alignment = 2
vertical_alignment = 1

[node name="indicator" type="Sprite2D" parent="arena/opponent"]
visible = false
position = Vector2(1627, 349)
scale = Vector2(0.24, 0.24)
texture = ExtResource("16_muem4")

[node name="AnimationPlayer" type="AnimationPlayer" parent="arena/opponent"]
libraries = {
&"": SubResource("AnimationLibrary_dp3eg")
}

[node name="player" type="Node2D" parent="arena"]

[node name="head" type="Node2D" parent="arena/player"]
position = Vector2(1597, 568)
scale = Vector2(0.05, 0.05)

[node name="neutral" type="Sprite2D" parent="arena/player/head"]
texture = ExtResource("15_gqmmt")

[node name="hurt" type="Sprite2D" parent="arena/player/head"]
visible = false
texture = ExtResource("16_yc10j")

[node name="thinking" type="Sprite2D" parent="arena/player/head"]
visible = false
texture = ExtResource("17_jscy8")

[node name="happy" type="Sprite2D" parent="arena/player/head"]
visible = false
texture = ExtResource("18_pm3ni")

[node name="name" type="Label" parent="arena/player"]
offset_left = 1662.0
offset_top = 516.0
offset_right = 1860.0
offset_bottom = 543.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 22
text = "Player Name"
horizontal_alignment = 2
vertical_alignment = 1

[node name="description" type="Label" parent="arena/player"]
offset_left = 1695.0
offset_top = 538.5
offset_right = 1860.0
offset_bottom = 555.5
theme_override_fonts/font = ExtResource("15_jkv2x")
theme_override_font_sizes/font_size = 12
text = "Short Description"
horizontal_alignment = 2
vertical_alignment = 1

[node name="value" type="Label" parent="arena/player"]
offset_left = 1698.0
offset_top = 574.0
offset_right = 1808.0
offset_bottom = 625.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 42
text = "99"
horizontal_alignment = 2
vertical_alignment = 1

[node name="damage" type="Label" parent="arena/player"]
modulate = Color(1, 1, 1, 0)
offset_left = 1624.0
offset_top = 634.0
offset_right = 1734.0
offset_bottom = 685.0
theme_override_fonts/font = ExtResource("13_a8y0u")
theme_override_font_sizes/font_size = 42
text = "-99"
horizontal_alignment = 2
vertical_alignment = 1

[node name="indicator" type="Sprite2D" parent="arena/player"]
visible = false
position = Vector2(1627, 568)
scale = Vector2(0.24, 0.24)
texture = ExtResource("16_muem4")

[node name="AnimationPlayer" type="AnimationPlayer" parent="arena/player"]
libraries = {
&"": SubResource("AnimationLibrary_gqmmt")
}

[connection signal="timeout" from="inputManager/Timer" to="inputManager" method="_on_timer_timeout"]
[connection signal="pressed" from="EndTurnButton" to="battleManager" method="_on_end_turn_button_pressed"]
